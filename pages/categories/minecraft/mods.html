<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Minecraft Mods | Nophin</title>
  <link rel="stylesheet" href="../../../style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Additional styles for Minecraft Mods page */
    :root {
      --mc-green: #6dc44e;
      --mc-dark-green: #5aad3d;
    }
    
    /* Content types navigation */
    .content-types {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 40px auto 60px;
      padding: 0 20px;
      max-width: 1200px;
      flex-wrap: wrap;
    }
    
    .content-type-btn {
      padding: 12px 20px;
      border-radius: 10px;
      background: var(--panel-dark);
      border: 1px solid var(--border-dark);
      color: #a8b3c8;
      font-weight: 700;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
    }
    
    .content-type-btn:hover {
      background: rgba(59, 130, 246, 0.08);
      color: #fff;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.15);
    }
    
    .content-type-btn.active {
      background: linear-gradient(90deg, var(--mc-green), var(--mc-dark-green));
      color: #fff;
      border-color: rgba(109, 196, 78, 0.3);
      box-shadow: 0 8px 25px rgba(109, 196, 78, 0.25);
    }
    
    body.light .content-type-btn {
      background: var(--panel-light);
      border: 1px solid var(--border-light);
      color: var(--text-light);
    }
    
    body.light .content-type-btn:hover {
      background: rgba(59, 130, 246, 0.12);
    }
    
    body.light .content-type-btn.active {
      background: linear-gradient(90deg, var(--mc-green), var(--mc-dark-green));
      color: #fff;
    }
    
    .page-header {
      text-align: center;
      margin: 120px auto 40px;
      max-width: 800px;
      padding: 0 20px;
    }
    
    .page-title {
      font-size: 2.8rem;
      font-weight: 900;
      margin-bottom: 15px;
      background: linear-gradient(90deg, var(--mc-green), #3b82f6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .page-subtitle {
      color: rgba(160, 180, 210, 0.8);
      font-size: 1.1rem;
      line-height: 1.6;
    }
    
    body.light .page-subtitle {
      color: rgba(17, 24, 39, 0.7);
    }
    
    /* Main layout with sidebar */
    .mods-layout {
      display: flex;
      gap: 28px;
      max-width: 1200px;
      margin: 40px auto 80px;
      padding: 0 20px;
    }
    
    /* Sidebar with filters */
    .filters-sidebar {
      width: 280px;
      background: var(--panel-dark);
      border-radius: 12px;
      padding: 20px;
      border: 1px solid var(--border-dark);
      height: fit-content;
      position: sticky;
      top: 100px;
    }
    
    body.light .filters-sidebar {
      background: var(--panel-light);
      border: 1px solid var(--border-light);
    }
    
    .filter-section {
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border-dark);
    }
    
    body.light .filter-section {
      border-bottom: 1px solid var(--border-light);
    }
    
    .filter-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .filter-title {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--accent);
      font-weight: 800;
      text-transform: uppercase;
      font-size: 12px;
      margin-bottom: 12px;
    }
    
    .filter-options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .filter-checkbox, .filter-radio {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 14px;
      color: #a8b3c8;
      transition: color 0.2s;
    }
    
    .filter-checkbox:hover, .filter-radio:hover {
      color: #fff;
    }
    
    body.light .filter-checkbox, 
    body.light .filter-radio {
      color: var(--text-light);
    }
    
    .filter-checkbox input, .filter-radio input {
      cursor: pointer;
    }
    
    .version-select {
      width: 100%;
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid var(--border-dark);
      background: rgba(255, 255, 255, 0.02);
      color: inherit;
      outline: none;
      font-size: 14px;
    }
    
    body.light .version-select {
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid var(--border-light);
    }
    
    .clear-filters {
      width: 100%;
      padding: 10px;
      margin-top: 15px;
      background: transparent;
      border: 1px solid var(--border-dark);
      color: #a8b3c8;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: var(--transition);
    }
    
    .clear-filters:hover {
      background: rgba(59, 130, 246, 0.08);
      color: #fff;
    }
    
    body.light .clear-filters {
      border: 1px solid var(--border-light);
      color: var(--text-light);
    }
    
    /* Mods Content */
    .mods-content {
      flex: 1;
    }
    
    .mods-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .mods-count {
      color: #a8b3c8;
      font-size: 14px;
    }
    
    body.light .mods-count {
      color: var(--text-light);
    }
    
    .mods-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }
    
    .mod-card {
      background: var(--panel-dark);
      border-radius: 12px;
      border: 1px solid var(--border-dark);
      padding: 20px;
      transition: var(--transition);
    }
    
    .mod-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.15);
    }
    
    body.light .mod-card {
      background: var(--panel-light);
      border: 1px solid var(--border-light);
    }
    
    .mod-image {
      width: 100%;
      height: 180px;
      border-radius: 8px;
      background: linear-gradient(135deg, #2d3748, #4a5568);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 15px;
      overflow: hidden;
    }
    
    .mod-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .mod-image-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: rgba(255, 255, 255, 0.3);
    }
    
    .mod-image-placeholder i {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .mod-title {
      font-size: 1.2rem;
      font-weight: 800;
      margin-bottom: 8px;
      color: #fff;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    body.light .mod-title {
      color: var(--text-light);
    }
    
    .mod-description {
      color: rgba(160, 180, 210, 0.8);
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 15px;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    body.light .mod-description {
      color: rgba(17, 24, 39, 0.7);
    }
    
    .mod-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .mod-tag {
      background: rgba(59, 130, 246, 0.1);
      color: #60a5fa;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .mod-author {
      color: rgba(160, 180, 210, 0.6);
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    body.light .mod-author {
      color: rgba(17, 24, 39, 0.6);
    }
    
    .mod-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: rgba(160, 180, 210, 0.6);
      font-size: 0.85rem;
      padding-top: 15px;
      border-top: 1px solid var(--border-dark);
    }
    
    body.light .mod-stats {
      color: rgba(17, 24, 39, 0.6);
      border-top: 1px solid var(--border-light);
    }
    
    .mod-stats span {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: rgba(160, 180, 210, 0.7);
      grid-column: 1 / -1;
    }
    
    .empty-state i {
      font-size: 4rem;
      margin-bottom: 20px;
      color: rgba(160, 180, 210, 0.3);
    }
    
    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: rgba(160, 180, 210, 0.9);
    }
    
    .empty-state p {
      font-size: 1rem;
      line-height: 1.6;
      max-width: 600px;
      margin: 0 auto;
    }
    
    body.light .empty-state {
      color: rgba(17, 24, 39, 0.6);
    }
    
    body.light .empty-state i {
      color: rgba(17, 24, 39, 0.2);
    }
    
    body.light .empty-state h3 {
      color: rgba(17, 24, 39, 0.8);
    }
    
    @media (max-width: 900px) {
      .mods-layout {
        flex-direction: column;
      }
      
      .filters-sidebar {
        width: 100%;
        position: static;
      }
      
      .content-types {
        gap: 10px;
        margin-bottom: 30px;
      }
      
      .content-type-btn {
        padding: 10px 15px;
        font-size: 0.9rem;
      }
      
      .page-header {
        margin: 100px auto 30px;
      }
      
      .page-title {
        font-size: 2.2rem;
      }
      
      .mods-grid {
        grid-template-columns: 1fr;
      }
    }
  .search-container {
  flex: 1;
  max-width: 400px;
}

.search-box {
  position: relative;
  display: flex;
  align-items: center;
}

.search-box i {
  position: absolute;
  left: 12px;
  color: rgba(160, 180, 210, 0.6);
}

.search-input {
  width: 100%;
  padding: 10px 10px 10px 40px;
  border-radius: 8px;
  border: 1px solid var(--border-dark);
  background: rgba(255, 255, 255, 0.02);
  color: inherit;
  outline: none;
  font-size: 14px;
  transition: var(--transition);
}

.search-input:focus {
  border-color: var(--accent);
  background: rgba(255, 255, 255, 0.04);
}

body.light .search-input {
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid var(--border-light);
}

body.light .search-input:focus {
  background: rgba(255, 255, 255, 0.95);
}
  </style>
</head>

<body>
  <!-- Header -->
  <div id="header-container"></div>

  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Minecraft Mods</h1>
    <p class="page-subtitle">
      Explore thousands of Minecraft mods created by our community. 
      From gameplay enhancements to new dimensions, find the perfect mod for your Minecraft experience.
    </p>
  </div>

  <!-- Content Types Navigation -->
  <div class="content-types">
    <a href="mods.html" class="content-type-btn active">
      <i class="fas fa-regular fa-cube"></i> Mods
    </a>
    <a href="datapacks.html" class="content-type-btn">
      <i class="fas fa-solid fa-code"></i> Datapacks
    </a>
    <a href="plugins.html" class="content-type-btn">
      <i class="fas fa-puzzle-piece"></i> Plugins
    </a>
    <a href="modpacks.html" class="content-type-btn">
      <i class="fas fa-solid fa-box"></i> Modpacks
    </a>
    <a href="maps.html" class="content-type-btn">
      <i class="fas fa-map"></i> Maps
    </a>
    <a href="resource-packs.html" class="content-type-btn">
      <i class="fas fa-toolbox"></i> Resource Packs
    </a>
    <a href="shaders.html" class="content-type-btn">
      <i class="fas fa-solid fa-image"></i> Shaders
    </a>
  </div>

<!-- Main Content -->
<div class="mods-layout">
  <!-- Filters Sidebar -->
  <div class="filters-sidebar">
    <div class="filter-section">
      <div class="filter-title">
        <i class="fas fa-code-branch"></i>
        <span>Version</span>
      </div>
      <select class="version-select" id="versionFilter">
        <option value="">All Versions</option>
      </select>
    </div>
    
    <div class="filter-section">
      <div class="filter-title">
        <i class="fas fa-puzzle-piece"></i>
        <span>Loader</span>
      </div>
      <div class="filter-options" id="loaderFilters">
        <!-- Заполнится JavaScript -->
      </div>
    </div>
    
    <div class="filter-section">
      <div class="filter-title">
        <i class="fas fa-tags"></i>
        <span>Category</span>
      </div>
      <div class="filter-options" id="categoryFilters">
        <!-- Заполнится JavaScript -->
      </div>
    </div>
    
    <div class="filter-section">
      <div class="filter-title">
        <i class="fas fa-server"></i>
        <span>Environment</span>
      </div>
      <div class="filter-options" id="environmentFilters">
        <!-- Заполнится JavaScript -->
      </div>
    </div>
    
    <button class="clear-filters" id="clearFilters">
      <i class="fas fa-filter-circle-xmark"></i> Clear Filters
    </button>
  </div>
  
  <!-- Mods Content -->
  <div class="mods-content">
    <div class="mods-header">
      <div class="mods-count" id="modsCount">0 mods</div>
    </div>
    
    <div class="mods-grid" id="modsGrid">
      <!-- Mods will be loaded by JavaScript -->
    </div>
  </div>
</div>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Modal (auth/project) -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <button id="modalClose" class="modal-close" aria-label="Close"><i class="fas fa-times"></i></button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- Load components and scripts -->
  <script type="module">
    // Импорт компонентов
    import { createHeader, initNavDropdowns } from '../../../components/header.js';
    import { createFooter } from '../../../components/footer.js';
    import { createProfileDropdown, checkAuthStatus, setupProfileDropdown, updateProfileName } from '../../../components/profile.js';
    import { setupAuthHandlers } from '../../../components/auth.js';
    
    // Константы для фильтров
    const minecraftVersions = [
      '1.0', '1.1', '1.2.1', '1.2.3', '1.2.4', '1.2.5',
      '1.3.1', '1.3.2',
      '1.4.2', '1.4.4', '1.4.5', '1.4.6', '1.4.7',
      '1.5', '1.5.1', '1.5.2',
      '1.6.1', '1.6.2', '1.6.4',
      '1.7.2', '1.7.4', '1.7.5', '1.7.6', '1.7.7', '1.7.8', '1.7.9', '1.7.10',
      '1.8', '1.8.1', '1.8.2', '1.8.3', '1.8.4', '1.8.5', '1.8.6', '1.8.7', '1.8.8', '1.8.9',
      '1.9', '1.9.1', '1.9.2', '1.9.3', '1.9.4',
      '1.10', '1.10.1', '1.10.2',
      '1.11', '1.11.1', '1.11.2',
      '1.12', '1.12.1', '1.12.2',
      '1.13', '1.13.1', '1.13.2',
      '1.14', '1.14.1', '1.14.2', '1.14.3', '1.14.4',
      '1.15', '1.15.1', '1.15.2',
      '1.16.1', '1.16.2', '1.16.3', '1.16.4', '1.16.5',
      '1.17', '1.17.1',
      '1.18', '1.18.1', '1.18.2',
      '1.19', '1.19.1', '1.19.2', '1.19.3', '1.19.4',
      '1.20', '1.20.1', '1.20.2', '1.20.3', '1.20.4', '1.20.5', '1.20.6',
      '1.21', '1.21.1', '1.21.2', '1.21.3', '1.21.4', '1.21.5', '1.21.6', '1.21.7', '1.21.8', '1.21.9', '1.21.10', '1.21.11'
    ];
    
    const loaders = ['Forge', 'Fabric', 'Quilt', 'NeoForge'];
    const categories = [
      'Adventure', 'Decoration', 'Economy', 'Equipment', 'Food', 
      'Game Mechanics', 'Library', 'Magic', 'Mobs', 'Optimization', 
      'Social', 'Storage', 'Technology', 'Utility', 'World Generation'
    ];
    const environments = ['Client', 'Server', 'Both'];
    
    let mods = [];
    
    // Основная функция инициализации
    function initPage() {
      console.log('Initializing mods page...');
      
      // Загружаем header
      const headerContainer = document.getElementById('header-container');
      if (headerContainer) {
        headerContainer.innerHTML = createHeader('minecraft');
      }
      
      // Загружаем footer
      const footerContainer = document.getElementById('footer-container');
      if (footerContainer) {
        footerContainer.innerHTML = createFooter();
      }
      
      // Настраиваем профиль
      const authStatus = checkAuthStatus();
      const profileDropdown = document.getElementById('profileDropdown');
      if (profileDropdown) {
        profileDropdown.innerHTML = createProfileDropdown(
          authStatus.isLoggedIn, 
          authStatus.username
        );
      }
      
      // Обновляем имя в кнопке профиля
      updateProfileName();
      
      // Настраиваем выпадающие меню
      setupProfileDropdown();
      initNavDropdowns();
      
      // Настраиваем обработчики авторизации
      setupAuthHandlers();
      
      // Настраиваем модальное окно
      const modalClose = document.getElementById('modalClose');
      const modalBackdrop = document.getElementById('modalBackdrop');
      
      if (modalClose && modalBackdrop) {
        modalClose.addEventListener('click', () => {
          modalBackdrop.classList.remove('show');
        });
        
        modalBackdrop.addEventListener('click', (e) => {
          if (e.target === modalBackdrop) {
            modalBackdrop.classList.remove('show');
          }
        });
      }
      
      // Загружаем данные и настраиваем фильтры
      loadModsData();
      populateFilters();
      setupFilterListeners();
      
      console.log('Mods page initialized successfully');
    }
    
    function loadModsData() {
      try {
        mods = JSON.parse(localStorage.getItem('nophin_mods') || '[]');
        console.log(`Loaded ${mods.length} mods from storage`);
        renderMods();
      } catch (error) {
        console.error('Error loading mods:', error);
        mods = [];
      }
    }
    
    function populateFilters() {
      const filtersSidebar = document.getElementById('filtersSidebar');
      if (!filtersSidebar) return;
      
      filtersSidebar.innerHTML = `
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-code-branch"></i>
            <span>Version</span>
          </div>
          <select class="version-select" id="versionFilter">
            <option value="">All Versions</option>
            ${minecraftVersions.map(v => `<option value="${v}">${v}</option>`).join('')}
          </select>
        </div>
        
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-puzzle-piece"></i>
            <span>Loader</span>
          </div>
          <div class="filter-options" id="loaderFilters">
            ${loaders.map(loader => `
              <label class="filter-checkbox">
                <input type="checkbox" value="${loader}" class="loader-filter">
                <span>${loader}</span>
              </label>
            `).join('')}
          </div>
        </div>
        
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-tags"></i>
            <span>Category</span>
          </div>
          <div class="filter-options" id="categoryFilters">
            ${categories.map(category => `
              <label class="filter-checkbox">
                <input type="checkbox" value="${category}" class="category-filter">
                <span>${category}</span>
              </label>
            `).join('')}
          </div>
        </div>
        
        <div class="filter-section">
          <div class="filter-title">
            <i class="fas fa-server"></i>
            <span>Environment</span>
          </div>
          <div class="filter-options" id="environmentFilters">
            ${environments.map(env => `
              <label class="filter-radio">
                <input type="radio" name="environment" value="${env}" class="environment-filter">
                <span>${env}</span>
              </label>
            `).join('')}
          </div>
        </div>
        
        <button class="clear-filters" id="clearFilters">
          <i class="fas fa-filter-circle-xmark"></i> Clear Filters
        </button>
      `;
    }
    
    function setupFilterListeners() {
      // Version filter
      const searchInput = document.getElementById('searchInput');
      if (searchInput) {
        searchInput.addEventListener('input', renderMods);
      }

      const versionFilter = document.getElementById('versionFilter');
      if (versionFilter) {
        versionFilter.addEventListener('change', renderMods);
      }
      
      // Other filters
      document.addEventListener('change', (e) => {
        if (e.target.matches('.loader-filter, .category-filter, .environment-filter')) {
          renderMods();
        }
      });
      
      // Clear filters
      const clearFiltersBtn = document.getElementById('clearFilters');
      if (clearFiltersBtn) {
        clearFiltersBtn.addEventListener('click', () => {
          if (versionFilter) versionFilter.value = '';
          document.querySelectorAll('.loader-filter, .category-filter').forEach(cb => cb.checked = false);
          document.querySelectorAll('.environment-filter').forEach(rb => rb.checked = false);
          renderMods();
        });
      }
    }
    
    function renderMods() {
      const modsGrid = document.getElementById('modsGrid');
      const modsCount = document.getElementById('modsCount');
      
      if (!modsGrid || !modsCount) return;
      
      const filteredMods = applyFilters(mods);
      modsCount.textContent = `${filteredMods.length} mod${filteredMods.length !== 1 ? 's' : ''}`;
      
      if (filteredMods.length === 0) {
        modsGrid.innerHTML = `
          <div class="empty-state">
            ${mods.length === 0 ? `
              <i class="fas fa-regular fa-cube"></i>
              <h3>No mods yet</h3>
              <p>Be the first to share your Minecraft mods! Once registered users start uploading content, it will appear here.</p>
              <p>Join our community and contribute to the modding ecosystem.</p>
            ` : `
              <i class="fas fa-search"></i>
              <h3>No mods found</h3>
              <p>Try adjusting your filters to find what you're looking for.</p>
            `}
          </div>
        `;
        return;
      }
      
      // Render mods
      modsGrid.innerHTML = filteredMods.map(mod => `
        <div class="mod-card">
          <div class="mod-image">
            ${mod.imageUrl ? 
              `<img src="${mod.imageUrl}" alt="${mod.title}">` : 
              `<div class="mod-image-placeholder">
                <i class="fas fa-regular fa-cube"></i>
                <span>No Image</span>
              </div>`
            }
          </div>
          <h3 class="mod-title">${mod.title || 'Untitled Mod'}</h3>
          <p class="mod-description">${mod.description || 'No description available.'}</p>
          <div class="mod-meta">
            ${(mod.loaders || []).map(loader => `<span class="mod-tag">${loader}</span>`).join('')}
            ${(mod.versions || []).map(version => `<span class="mod-tag">MC ${version}</span>`).join('')}
          </div>
          <div class="mod-author">
            <i class="fas fa-user"></i>
            <span>${mod.author || 'Unknown'}</span>
          </div>
          <div class="mod-stats">
            <span><i class="fas fa-download"></i> ${mod.downloads || 0}</span>
            <span><i class="fas fa-star"></i> ${mod.rating || 0}</span>
            <span><i class="fas fa-calendar"></i> ${mod.date || 'Unknown'}</span>
          </div>
        </div>
      `).join('');
    }
    
    function applyFilters(modsList) {
  const versionFilter = document.getElementById('versionFilter');
  const loaderCheckboxes = document.querySelectorAll('.loader-filter:checked');
  const categoryCheckboxes = document.querySelectorAll('.category-filter:checked');
  const environmentRadio = document.querySelector('.environment-filter:checked');
  const searchInput = document.getElementById('searchInput');
  
  let filtered = [...modsList];
  
  // Search filter
  if (searchInput && searchInput.value.trim()) {
    const searchTerm = searchInput.value.toLowerCase().trim();
    filtered = filtered.filter(mod => 
      (mod.title && mod.title.toLowerCase().includes(searchTerm)) ||
      (mod.description && mod.description.toLowerCase().includes(searchTerm)) ||
      (mod.author && mod.author.toLowerCase().includes(searchTerm))
    );
  }
  
  // Version filter
  if (versionFilter && versionFilter.value) {
    filtered = filtered.filter(mod => 
      mod.versions && mod.versions.includes(versionFilter.value)
    );
  }
  
  // Loader filter
  if (loaderCheckboxes.length > 0) {
    const selectedLoaders = Array.from(loaderCheckboxes).map(cb => cb.value);
    filtered = filtered.filter(mod => 
      mod.loaders && selectedLoaders.some(loader => mod.loaders.includes(loader))
    );
  }
  
  // Category filter
  if (categoryCheckboxes.length > 0) {
    const selectedCategories = Array.from(categoryCheckboxes).map(cb => cb.value);
    filtered = filtered.filter(mod => 
      mod.categories && selectedCategories.some(category => mod.categories.includes(category))
    );
  }
  
  // Environment filter
  if (environmentRadio) {
    filtered = filtered.filter(mod => mod.environment === environmentRadio.value);
  }
  
  return filtered;
}
    
    // Инициализация при загрузке страницы
    document.addEventListener('DOMContentLoaded', initPage);
  </script>
</body>
</html>